---
# Headless service for StatefulSet
apiVersion: v1
kind: Service
metadata:
  name: paw-validator-headless
  namespace: paw-testnet
  labels:
    app.kubernetes.io/name: paw
    app.kubernetes.io/component: validator
    environment: testnet
spec:
  type: ClusterIP
  clusterIP: None
  publishNotReadyAddresses: true
  selector:
    app.kubernetes.io/name: paw
    app.kubernetes.io/component: validator
  ports:
    - name: p2p
      port: 26656
      targetPort: 26656
    - name: rpc
      port: 26657
      targetPort: 26657
    - name: metrics
      port: 26660
      targetPort: 26660
---
# P2P service (external access)
apiVersion: v1
kind: Service
metadata:
  name: paw-testnet-p2p
  namespace: paw-testnet
  labels:
    app.kubernetes.io/name: paw
    app.kubernetes.io/component: p2p
    environment: testnet
spec:
  type: NodePort
  selector:
    app.kubernetes.io/name: paw
    app.kubernetes.io/component: validator
  ports:
    - name: p2p
      port: 26656
      targetPort: 26656
      nodePort: 32656
---
# RPC service
apiVersion: v1
kind: Service
metadata:
  name: paw-testnet-rpc
  namespace: paw-testnet
  labels:
    app.kubernetes.io/name: paw
    app.kubernetes.io/component: rpc
    environment: testnet
spec:
  type: NodePort
  selector:
    app.kubernetes.io/name: paw
    app.kubernetes.io/component: validator
  ports:
    - name: rpc
      port: 26657
      targetPort: 26657
      nodePort: 32657
---
# API service
apiVersion: v1
kind: Service
metadata:
  name: paw-testnet-api
  namespace: paw-testnet
  labels:
    app.kubernetes.io/name: paw
    app.kubernetes.io/component: api
    environment: testnet
spec:
  type: NodePort
  selector:
    app.kubernetes.io/name: paw
    app.kubernetes.io/component: validator
  ports:
    - name: api
      port: 1317
      targetPort: 1317
      nodePort: 32317
---
# gRPC service
apiVersion: v1
kind: Service
metadata:
  name: paw-testnet-grpc
  namespace: paw-testnet
  labels:
    app.kubernetes.io/name: paw
    app.kubernetes.io/component: grpc
    environment: testnet
spec:
  type: NodePort
  selector:
    app.kubernetes.io/name: paw
    app.kubernetes.io/component: validator
  ports:
    - name: grpc
      port: 9090
      targetPort: 9090
      nodePort: 32090
