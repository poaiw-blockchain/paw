---
# PAW Genesis Secrets
# CRITICAL SECURITY: GPG public key for genesis verification
# DO NOT commit actual secrets to version control

apiVersion: v1
kind: Secret
metadata:
  name: paw-secrets
  namespace: paw-blockchain
  labels:
    app: paw
    component: genesis
    security: critical
  annotations:
    description: "Genesis verification GPG public key"
    security-level: "critical"
type: Opaque
stringData:
  # GPG Public Key for Genesis Verification
  # This key is used to verify the GPG signature of the genesis file
  #
  # HOW TO OBTAIN:
  # 1. Request public key from PAW Chain maintainers
  # 2. Verify key fingerprint through multiple channels:
  #    - Official website
  #    - Social media (Twitter/X verified account)
  #    - Multiple validator confirmations
  #    -  verified commits
  #
  # EXAMPLE KEY FINGERPRINT (verify this):
  # Key ID: 0xABCDEF1234567890
  # Fingerprint: 1234 5678 9ABC DEF0 1234 5678 9ABC DEF0 1234 5678
  #
  # TO GENERATE A NEW KEY PAIR (for testing/devnet):
  # gpg --full-generate-key
  # gpg --armor --export your-email@github.com > public-key.asc
  #
  # REPLACE THE PLACEHOLDER BELOW WITH ACTUAL PUBLIC KEY:
  gpg-public-key: |
    -----BEGIN PGP PUBLIC KEY BLOCK-----

    EXAMPLE - REPLACE WITH ACTUAL GPG PUBLIC KEY

    This is a placeholder. Before deploying to production:
    1. Generate or obtain the official PAW Chain GPG public key
    2. Verify the key through multiple independent channels
    3. Replace this placeholder with the actual key
    4. Do NOT commit real keys to public repositories

    For production deployment:
    - Use kubectl create secret or sealed-secrets
    - Store in secure secrets management (Vault, AWS Secrets Manager, etc.)
    - Rotate keys according to security policy

    Example format (this is NOT a valid key):
    mQENBGXXXXXXBCACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
    xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
    xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

    -----END PGP PUBLIC KEY BLOCK-----

---
# Genesis Secret Management Instructions
apiVersion: v1
kind: ConfigMap
metadata:
  name: genesis-secret-instructions
  namespace: paw-blockchain
  labels:
    app: paw
    component: documentation
data:
  DEPLOYMENT_INSTRUCTIONS.txt: |
    ========================================
    GENESIS SECRET DEPLOYMENT INSTRUCTIONS
    ========================================

    CRITICAL: Do NOT commit actual secrets to !

    PRODUCTION DEPLOYMENT OPTIONS:

    1. KUBECTL CREATE SECRET (Simple)
       kubectl create secret generic paw-secrets \
         --from-file=gpg-public-key=./public-key.asc \
         -n paw-blockchain

    2. SEALED SECRETS (Recommended for GitOps)
       # Install sealed-secrets controller
       kubectl apply -f https://github.com/bitnami-labs/sealed-secrets/releases/download/v0.24.0/controller.yaml

       # Create sealed secret
       kubectl create secret generic paw-secrets \
         --from-file=gpg-public-key=./public-key.asc \
         --dry-run=client -o yaml | \
         kubeseal -o yaml > sealed-genesis-secret.yaml

       # Commit sealed secret (safe for )
       kubectl apply -f sealed-genesis-secret.yaml

    3. EXTERNAL SECRETS OPERATOR (Enterprise)
       # Use with Vault, AWS Secrets Manager, GCP Secret Manager, etc.
       apiVersion: external-secrets.io/v1beta1
       kind: ExternalSecret
       metadata:
         name: paw-secrets
         namespace: paw-blockchain
       spec:
         secretStoreRef:
           name: vault-backend
           kind: SecretStore
         target:
           name: paw-secrets
         data:
           - secretKey: gpg-public-key
             remoteRef:
               key: paw/genesis/gpg-public-key

    4. MANUAL DEPLOYMENT (Development/Testing)
       # Edit this file with actual key
       # Deploy manually (do not commit changes)
       kubectl apply -f genesis-secret.yaml

    GPG KEY GENERATION (for new networks):

    1. Generate key pair:
       gpg --full-generate-key
       # Select: RSA and RSA (default)
       # Key size: 4096 bits
       # Validity: 2 years (or as per policy)
       # Real name: PAW Chain Genesis
       # Email: genesis@paw-chain.org

    2. Export public key:
       gpg --armor --export genesis@paw-chain.org > paw-genesis-public.asc

    3. Export private key (KEEP SECURE):
       gpg --armor --export-secret-keys genesis@paw-chain.org > paw-genesis-private.asc
       # Store in secure offline location
       # Use hardware security module (HSM) for production

    4. Sign genesis file:
       gpg --armor --detach-sign genesis.json
       # Creates genesis.json.asc

    5. Distribute public key:
       - Publish on official website
       - Include in  release
       - Share fingerprint through multiple channels
       - Post to social media (verified accounts)

    KEY VERIFICATION CHECKLIST:

    □ Key fingerprint verified through official website
    □ Key fingerprint verified through social media
    □ Key fingerprint confirmed by multiple validators
    □ Key signature on  commits verified
    □ Key listed in official documentation
    □ Contact information verified (email, Discord, etc.)

    SECURITY BEST PRACTICES:

    - Never share private keys
    - Use strong passphrases for private keys
    - Store private keys in HSM or secure offline storage
    - Rotate keys according to security policy
    - Maintain key backup and recovery procedures
    - Document key fingerprints in multiple locations
    - Require multi-party verification for key changes

    ========================================

  KEY_ROTATION_PROCEDURE.txt: |
    ========================================
    GPG KEY ROTATION PROCEDURE
    ========================================

    When to rotate keys:
    - Regularly (every 1-2 years)
    - When key is compromised
    - When signing authority changes
    - Before major network upgrades

    Rotation Steps:

    1. Generate new key pair (see DEPLOYMENT_INSTRUCTIONS.txt)

    2. Sign old key with new key:
       gpg --sign-key OLD_KEY_ID

    3. Announce rotation:
       - Post on official channels
       - Email all validators
       - Update documentation
       - Provide transition period (30+ days)

    4. During transition:
       - Accept both old and new signatures
       - Deploy both public keys to clusters
       - Update verification scripts

    5. After transition:
       - Remove old key from secrets
       - Update all documentation
       - Revoke old key if compromised

    6. Update genesis-secret.yaml with new public key

    7. Deploy to all clusters:
       kubectl apply -f genesis-secret.yaml

    ========================================
